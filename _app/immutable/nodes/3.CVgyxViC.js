import"../chunks/DsnmJJEf.js";import"../chunks/BSIlWNwc.js";import{c as lt,o as Q,e as r,h as rt,s as V}from"../chunks/BKD9kp5i.js";import{p as X,W as a,a4 as k,g as s,o as H,v as t,x as n,w as e,a5 as it,m as _,q as Y,a6 as ct,t as J,k as dt,l as vt}from"../chunks/BYefuHqZ.js";import{p as ht,b as pt,i as F}from"../chunks/DOLPL3qS.js";import{i as Z}from"../chunks/Cy9r-2zy.js";import{r as ut,b as mt,d as bt,p as ft,M as kt,a as gt}from"../chunks/Pxotq6tw.js";var wt=H('<div class="popup-backdrop svelte-1dllh6t" role="dialog" aria-modal="true" aria-labelledby="toc-title" tabindex="-1"><div class="popup-content svelte-1dllh6t"><div class="popup-header svelte-1dllh6t"><h2 id="toc-title" class="svelte-1dllh6t">Terms and Conditions</h2> <button class="close-btn svelte-1dllh6t" aria-label="Close popup" type="button">&times;</button></div> <div class="popup-body svelte-1dllh6t"><div class="simple-content svelte-1dllh6t"><p class="svelte-1dllh6t"><strong class="svelte-1dllh6t">By continuing to use this app, you agree to the following Terms and Conditions:</strong></p> <ol class="svelte-1dllh6t"><li class="svelte-1dllh6t"><strong class="svelte-1dllh6t">No Data Storage:</strong> The markdown content is absolutely not stored on our server. Everything is processed inside your browser. All data, regardless of content, is encoded from your link. All responsibility lies with the generator of the link.</li> <li class="svelte-1dllh6t"><strong class="svelte-1dllh6t">No Developer Responsibility:</strong> We (developers) take absolutely zero responsibility for what messages are shared, as we have no way to know what was shared.</li> <li class="svelte-1dllh6t"><strong class="svelte-1dllh6t">No Platform Indexing:</strong> Our platform does not index the links. However, our host (GitHub) may collect logs for their own purposes. We are not responsible for that.</li></ol> <div class="attribution svelte-1dllh6t"><p class="svelte-1dllh6t">This is a free service brought to you by <a href="https://ishafayet.me" target="_blank" rel="noopener noreferrer" class="svelte-1dllh6t">Sayem Shafayet</a>, a FOSS enthusiast.</p></div></div></div> <div class="popup-checkbox svelte-1dllh6t"><label class="checkbox-label svelte-1dllh6t"><input type="checkbox" class="checkbox-input svelte-1dllh6t"/> <span class="checkbox-text svelte-1dllh6t">Do not show again for this link</span></label></div> <div class="popup-footer svelte-1dllh6t"><button class="got-it-btn svelte-1dllh6t" type="button">I Understand</button></div></div></div>');function yt(l,i){X(i,!1);let c=ht(i,"linkHash",8);const m=lt();let p=k(),g=k(!1);Q(()=>{localStorage.getItem(`toc_hidden_${c()}`)==="true"&&a(g,!0),s(p)&&s(p).focus()});function v(){m("close")}function w(h){h.key==="Escape"&&v()}function S(){s(g)?localStorage.setItem(`toc_hidden_${c()}`,"true"):localStorage.removeItem(`toc_hidden_${c()}`)}Z();var u=wt(),E=t(u),T=t(E),A=n(t(T),2);e(T);var C=n(T,4),I=t(C),R=t(I);ut(R),it(2),e(I),e(C);var N=n(C,2),L=t(N);e(N),e(E),e(u),pt(u,h=>a(p,h),()=>s(p)),r("click",A,v),mt(R,()=>s(g),h=>a(g,h)),r("change",R,S),r("click",L,()=>{v()}),r("click",u,h=>h.target===h.currentTarget&&v()),r("keydown",u,w),_(l,u),Y()}async function _t(l){try{const i=new TextEncoder,c=typeof l=="string"?i.encode(l):l,m=await crypto.subtle.digest("SHA-256",c);return Ht(m)}catch(i){throw console.error("SHA-256 hash generation failed:",i),new Error("Failed to generate SHA-256 hash")}}async function Ct(l,i=16){return(await _t(l)).substring(0,i)}async function xt(l){return await Ct(l,12)}function Ht(l){const i=new Uint8Array(l);return Array.from(i).map(c=>c.toString(16).padStart(2,"0")).join("")}var St=H('<div class="error-section svelte-1nm4t0k"><div class="logo-container svelte-1nm4t0k"><img src="/logo.png" alt="Reflect Logo" class="logo svelte-1nm4t0k"/> <h1 class="svelte-1nm4t0k">Reflect</h1></div> <div class="error-icon svelte-1nm4t0k">‚ö†Ô∏è</div> <h2 class="svelte-1nm4t0k">Error</h2> <p class="svelte-1nm4t0k"> </p> <div class="error-actions svelte-1nm4t0k"><button class="btn btn-secondary svelte-1nm4t0k">TOC</button> <button class="btn btn-primary svelte-1nm4t0k">Create New</button></div></div>'),Tt=H('<div class="content-section svelte-1nm4t0k"><div class="content-header svelte-1nm4t0k"><div class="logo-container svelte-1nm4t0k"><img src="/logo.png" alt="Reflect Logo" class="logo svelte-1nm4t0k"/> <h1 class="svelte-1nm4t0k">Reflect</h1></div> <div class="actions desktop-actions svelte-1nm4t0k"><button class="btn btn-secondary svelte-1nm4t0k">TOC</button> <button class="btn btn-primary svelte-1nm4t0k">Create New</button></div></div> <div class="markdown-content svelte-1nm4t0k"><!></div> <div class="mobile-actions svelte-1nm4t0k"><button class="btn btn-secondary svelte-1nm4t0k">TOC</button> <button class="btn btn-primary svelte-1nm4t0k">Create New</button></div> <div class="raw-section svelte-1nm4t0k"><details class="svelte-1nm4t0k"><summary class="svelte-1nm4t0k">View Raw Markdown</summary> <div class="raw-content-container svelte-1nm4t0k"><div class="raw-actions svelte-1nm4t0k"><button class="btn btn-secondary btn-small svelte-1nm4t0k">üìã Copy to Clipboard</button> <button class="btn btn-primary btn-small svelte-1nm4t0k">üîÄ Fork</button></div> <pre class="raw-content svelte-1nm4t0k"> </pre></div></details></div></div>'),At=H('<div class="loading-section svelte-1nm4t0k"><div class="loading-spinner svelte-1nm4t0k"></div> <p class="svelte-1nm4t0k">Loading content...</p></div>'),Rt=H('<div class="copy-notification svelte-1nm4t0k">‚úÖ Content copied to clipboard!</div>'),Nt=H('<main class="container svelte-1nm4t0k"><!> <!> <!></main>');function Bt(l,i){X(i,!1);let c=k(""),m=k(""),p=k(""),g=k([]),v=k(!1),w=k(""),S=k(!1);Q(async()=>{const d=window.location.hash.substring(1).split("/");if(d.length<3||d[1]!=="view"){a(p,"Invalid URL format. Expected: /#/view/encodedContent");return}const b=d[2];if(!b){a(p,"No markdown content found in the URL.");return}try{a(m,bt(b)),a(c,s(m)),a(g,ft(s(c))),a(w,await xt(b)),localStorage.getItem(`toc_hidden_${s(w)}`)||a(v,!0)}catch(x){a(p,"Failed to decode the markdown content. The link may be invalid."),console.error("Decoding error:",x)}});function u(){window.location.href="/"}function E(){navigator.clipboard.writeText(s(m)).then(()=>{a(S,!0),setTimeout(()=>{a(S,!1)},2e3)}).catch(o=>{console.error("Failed to copy content:",o)})}function T(){gt.set(s(m)),window.location.href="/"}Z();var A=Nt();rt(o=>{ct.title="Reflect - Shared Content"});var C=t(A);{var I=o=>{var d=St(),b=n(t(d),6),x=t(b,!0);e(b);var O=n(b,2),f=t(O),y=n(f,2);e(O),e(d),J(()=>V(x,s(p))),r("click",f,()=>{a(w,"error"),a(v,!0)}),r("click",y,u),_(o,d)},R=o=>{var d=dt(),b=vt(d);{var x=f=>{var y=Tt(),M=t(y),U=n(t(M),2),$=t(U),et=n($,2);e(U),e(M);var D=n(M,2),st=t(D);kt(st,{get tokens(){return s(g)}}),e(D);var B=n(D,2),W=t(B),ot=n(W,2);e(B);var K=n(B,2),j=t(K),q=n(t(j),2),P=t(q),z=t(P),at=n(z,2);e(P);var G=n(P,2),nt=t(G,!0);e(G),e(q),e(j),e(K),e(y),J(()=>V(nt,s(m))),r("click",$,()=>{a(v,!0)}),r("click",et,u),r("click",W,()=>{a(v,!0)}),r("click",ot,u),r("click",z,E),r("click",at,T),_(f,y)},O=f=>{var y=At();_(f,y)};F(b,f=>{s(c)?f(x):f(O,!1)},!0)}_(o,d)};F(C,o=>{s(p)?o(I):o(R,!1)})}var N=n(C,2);{var L=o=>{yt(o,{get linkHash(){return s(w)},$$events:{close:()=>a(v,!1)}})};F(N,o=>{s(v)&&s(w)&&o(L)})}var h=n(N,2);{var tt=o=>{var d=Rt();_(o,d)};F(h,o=>{s(S)&&o(tt)})}e(A),_(l,A),Y()}export{Bt as component};
